<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>Note App</title>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.3/handlebars.min.js" integrity="sha256-/PJBs6QWvXijOFIX04kZpLb6ZtSQckdOIavLWKKOgXU=" crossorigin="anonymous" defer></script> -->
    <script src="./ext-modules/handlebars.min.js" defer></script>
    <script src="scripts/index.js" type="module"></script>
    <link rel="stylesheet" href="styles/index.css" />
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./icons/favicon-16x16.png">
</head>

<body>

<!-- Main page with render slots for Handlebars -->
<div class="container">
    <div id="view-list">
        <div class="todo-nav"></div>
        <main class="todo-list"></main>
        <dialog id="spinner">
            <div class="spinner"></div>
            <div class="spinner-text">Loading data...</div>
        </dialog>
    </div>
    <div id="view-form" class="hidden">
        <div class="todo-form"></div>
    </div>
</div>

<!-- --------------------------------------------------- -->
<!--                 HANDLEBARS TEMPLATES                 -->
<!-- --------------------------------------------------- -->

<!-- Nav bar template for Handlebars, will be rendered in <div .todo-nav> -->
<script id="nav-template" type="text/x-handlebars-template">
    <nav class="navbar">
        <button id="NewTask" class="btn-action">New Task</button>
        <button id="ToggleMode" class="btn-action align-right">Toggle Mode</button>
    </nav>
    <nav class="toolbar">
        <button id="SortByName" class="btn-toolbar">By Name{{{sortBy 'name'}}}</button>
        <button id="SortByDueDate" class="btn-toolbar">By Due Date{{{sortBy 'dueDate'}}}</button>
        <button id="SortByCreationDate" class="btn-toolbar">By Creation Date{{{sortBy 'createdDate'}}}</button>
        <button id="SortByImportance" class="btn-toolbar">By Importance{{{sortBy 'importance'}}}</button>
        <button id="FilterOpen" class={{{getClass "btn-toolbar align-right" filterOpen}}} >Filter Open</button>
    </nav>
</script>


<!-- List template for Handlebars, will be rendered in <div .todo-list> -->
<script id="list-template" type="text/x-handlebars-template">
    {{#if this.length}}
        <ul>
            {{#each this}}
                <li>
                    <div class="li-container">
                        <div class="grid-date">{{formatDate dueDate}}</div>
                        <div class="grid-name">{{name}}</div>
                        <div class="grid-importance">{{{formatImportance importance}}}</div>
                        <div class="grid-status">
                            <input type="checkbox" class="disabled" {{#if completed}}checked{{/if}}>
                            <label>done</label>
                        </div>
                        <div class="grid-description">{{description}}</div>
                        <div class="grid-edit">
                            <button class="btn-action" data-id="{{id}}">Edit</button>
                        </div>
                    </div>
                </li>
            {{/each}}
        </ul>
    {{else}}
        <div class="no-list">No items to show!</div>
    {{/if}}
</script>


<!-- Form template for Handlebars, will be rendered in <div .todo-form> -->
<script id="form-template" type="text/x-handlebars-template">
    <h2>Add new task</h2>
    <form>
        <div class="flex col mb-1">
            <label>Name</label>
            <input name="name" value="{{name}}" class="w-100">
        </div>
        <div class="flex row mb-1 w-100">
            <div class="flex col">
                <label>Due Date</label>
                <input type="date" value="{{dueDate}}"/>
            </div>
            <div class="flex col center mb-1">
                <label>Importance</label>
                <input type="range" min="1" max="5" step="1" value="{{importance}}"/>
            </div>
            <div class="flex col mb-1">
                <label>Done</label>
                <input type="checkbox" value="{{completed}}"/>
            </div>
        </div>
        <label>Description</label>
        <textarea name="description" rows="5" class="mb-1">{{description}}</textarea>

        <nav class="flex">
            <button class="btn-action align-right">Save</button>
            <button class="btn-toolbar">Cancel</button>
        </nav>

    </form>
</script>

</body>
</html>

